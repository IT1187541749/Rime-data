--[[ä¸­æ–‡è¾“å…¥æ³• ï¼ˆåŒæ–‡æ— éšœç¢ç‰ˆï¼‰

ã€é¢œè‰²è¡¨2.0ã€‘

ä½œè€…ï¼š é£ä¹‹æ¼«èˆ 
è°ƒç”¨æ–¹å¼ï¼š
å°†æœ¬luaæ”¾è¿›ä»¥ä¸‹ç›®å½•/storage/emulated/0/Android/rime/script

trime.yaml:

preset_keys:
  _Keyboard_Color: {label: ğŸ¥¶, send: function, command: 'é¢œè‰²è¡¨2.0.lua'}

preset_keyboards:
  - {click: _Keyboard_Color}
2020-09-11
]]
require "import"
import "android.widget.*"
import "android.view.*"
import "android.graphics.RectF"
import "android.graphics.Color"
import "android.graphics.drawable.StateListDrawable"


local arr={
  
  {"ç¬¦å·",
    { --å­˜æ”¾è¡¨æƒ…çš„table
    --{æŒ‰é”®å,ç¬¦å·table æˆ– æ–‡æœ¬}
    {"å¸¸ç”¨",[[`"~!@#%+|^$-_()*=&\.[]{}"'<>?:;,/ï¼Œã€‚ï¼Ÿï¼ã€ï¼Šã€”ã€•ã€ˆã€‰ã€Šã€‹ã€ã€‘â†‘â†“â†â†’]]},
    {"è‹±æ–‡",[[,.?!:/@...";'~()<>*&[]\`#$_+-=^|{}]]},
    {"ä¸­æ–‡",[[ï¼Œã€‚ï¼Ÿï¼ï¼šã€@â€¦â€¦â€œï¼›â€˜â€™â€â€”â€”ï¼ˆï¼‰ã€Šã€‹ã€ˆã€‰ã€”ã€•ï¼»ï¼½ã€ã€‘*&+-Ã—Ã·=#ï¿¥ï¼…Ë‡Â·â€¢ï½]]},
    {"è¿ç®—",[[123ï¹¢-=456Ã—Ã·*789/.0Â±â‰Œâˆ½â‰¦â‰§â‰’ï¹¤ï¹¥â‰ˆâ‰¡â‰ =â‰¤â‰¥<>â‰®â‰¯âˆ·âˆ¶âˆ«âˆ®âˆâˆâˆ§âˆ¨âˆ‘âˆâˆªâˆ©âˆˆâˆµâˆ´âŠ¥âˆ¥âˆ âŒ’âŠ™âˆšâˆŸâŠ¿ã’ã‘%â€°â…ŸÂ½â…“â…•â…™â…›â…”â…–â…šâ…œÂ¾â…—â…â…â…˜â‰‚â‰ƒâ‰„â‰…â‰†â‰‡â‰ˆâ‰‰â‰Šâ‰‹â‰Œâ‰â‰â‰â‰â‰‘â‰’â‰“â‰”â‰•â‰–â‰—â‰˜â‰™â‰šâ‰›â‰œâ‰â‰â‰Ÿâ‰ â‰¡â‰¢â‰£â‰¤â‰¥â‰¦â‰§â‰¨â‰©âŠ°âŠ±â‹›â‹šâˆ«âˆ¬âˆ­âˆ®âˆ¯âˆ°âˆ±âˆ²âˆ³%â„…â€°â€±]]},
    {"å•ä½",[[Ã¸Ã˜Ï€Â°â€²â€³ï¼„ï¿¥ã€’ï¿ ï¿¡ï¼…ï¼ â„ƒâ„‰ï¹©ï¹ªâ€°ï¹«ã¡ã¥ã•mlãœãããmÂ³ããã„molã’ã‘Âºâ—‹Â¤%$ÂºÂ¹Â²Â³â´â¿â‚â‚‚â‚ƒâ‚„â‚¬Â£Ò°â‚´$â‚°Â¢â‚¤Â¥â‚³â‚²â‚ªâ‚µå…ƒâ‚£â‚±à¸¿Â¤â‚¡â‚®â‚­â‚©Şƒå††â‚¢â‚¥â‚«â‚¦zÅ‚ï·¼â‚ â‚§â‚¯â‚¨KÄà¤°â‚¹Æ’â‚¸ï¿ ]]},
    {"å£°éŸµ",[[bpmfdtnlÉ¡khjqxzhchshrzcsywÉ‘ÄÃ¡ÇÃ oÅÃ³Ç’Ã²eÄ“Ã©Ä›Ã¨iÄ«Ã­ÇÃ¬uÅ«ÃºÇ”Ã¹Ã¼Ç–Ç˜ÇšÇœÃªîŸ‡Å„ÅˆîŸˆ]]},
    {"æ‹¼éŸ³",{"É‘i","Äi","Ã¡i","Çi","Ã i","ei","Ä“i","Ã©i","Ä›i","Ã¨i","ui","uÄ«","uÃ­","uÇ","uÃ¬","É‘o","Äo","Ã¡o","Ço","Ã o","ou","Åu","Ã³u","Ç’u","Ã²u","iu","iÅ«","iÃº","iÇ”","iÃ¹","ie","iÄ“","iÃ©","iÄ›","iÃ¨","Ã¼e","Ã¼Ä“","Ã¼Ã©","Ã¼Ä›","Ã¼Ã¨","er","Ä“r","Ã©r","Ä›r","Ã¨r","É‘n","Än","Ã¡n","Çn","Ã n","en","Ä“n","Ã©n","Ä›n","Ã¨n","in","Ä«n","Ã­n","Çn","Ã¬n","un","Å«n","Ãºn","Ç”n","Ã¹n","Ã¼n","Ç–n","Ç˜n","Çšn","Çœn","É‘nÉ¡","ÄnÉ¡","Ã¡nÉ¡","ÇnÉ¡","Ã nÉ¡","enÉ¡","Ä“nÉ¡","Ã©nÉ¡","Ä›nÉ¡","Ã¨nÉ¡","inÉ¡","Ä«nÉ¡","Ã­nÉ¡","ÇnÉ¡","Ã¬nÉ¡","onÉ¡","ÅnÉ¡","Ã³nÉ¡","Ç’nÉ¡","Ã²nÉ¡","uÉ‘","uÄ","uÃ¡","uÇ","uÃ ","uo","uÅ","uÃ³","uÇ’","uÃ²","uÉ‘i","uÄi","uÃ¡i","uÇi","uÃ i","uÉ‘nÉ¡","uÄnÉ¡","uÃ¡nÉ¡","uÇnÉ¡","uÃ nÉ¡","uÉ‘n","uÄn","uÃ¡n","uÇn","uÃ n","Ã¼É‘n","Ã¼Än","Ã¼Ã¡n","Ã¼Çn","Ã¼Ã n","iÉ‘","iÄ","iÃ¡","iÇ","iÃ ","iÉ‘o","iÄo","iÃ¡o","iÇo","iÃ o","iÉ‘n","iÄn","iÃ¡n","iÇn","iÃ n","iÉ‘nÉ¡","iÄnÉ¡","iÃ¡nÉ¡","iÇnÉ¡","iÃ nÉ¡","ionÉ¡","iÅnÉ¡","iÃ³nÉ¡","iÇ’nÉ¡","iÃ²nÉ¡"}},
    {"åºå·",[[â‘ â‘¡â‘¢â‘£â‘¤â‘¥â‘¦â‘§â‘¨â‘©â‘ªâ‘«â‘¬â‘­â‘®â‘¯â‘°â‘±â‘²â‘³â“ªâ¶â·â¸â¹âºâ»â¼â½â¾â¿â“«â“¬â“­â“®â“¯â“°â“±â“²â“³â“´ãŠ€ãŠãŠ‚ãŠƒãŠ„ãŠ…ãŠ†ãŠ‡ãŠˆãŠ‰ãˆ ãˆ¡ãˆ¢ãˆ£ãˆ¤ãˆ¥ãˆ¦ãˆ§ãˆ¨ãˆ©â‘´â‘µâ‘¶â‘·â‘¸â‘¹â‘ºâ‘»â‘¼â‘½â‘¾â‘¿â’€â’â’‚â’ƒâ’„â’…â’†â’‡â’ˆâ’‰â’Šâ’‹â’Œâ’â’â’â’â’‘â’’â’“â’”â’•â’–â’—â’˜â’™â’šâ’›â… â…¡â…¢â…£â…¤â…¥â…¦â…§â…¨â…©â…ªâ…«â…°â…±â…²â…³â…´â…µâ…¶â…·â…¸â…¹â’¶â’·â’¸â’¹â’ºâ’»â’¼â’½â’¾â’¿â“€â“â“‚â“ƒâ“„â“…â“†â“‡â“ˆâ“‰â“Šâ“‹â“Œâ“â“â“â“â“‘â“’â““â“”â“•â“–â“—â“˜â“™â“šâ“›â“œâ“â“â“Ÿâ“ â“¡â“¢â“£â“¤â“¥â“¦â“§â“¨â“©â’œâ’â’â’Ÿâ’ â’¡â’¢â’£â’¤â’¥â’¦â’§â’¨â’©â’ªâ’«â’¬â’­â’®â’¯â’°â’±â’²â’³â’´â’µ]]},
    {"å¸Œè…Š",[[Î‘Î’Î“Î”Î•Î–Î—Î˜Î™ÎšÎ›ÎœÎÎÎŸÎ Î¡Î£Î¤Î¥Î¦Î§Î¨Î©Î±Î²Î³Î´ÎµÎ¶Î·Î¸Î¹ÎºÎ»Î¼Î½Î¾Î¿Ï€ÏÏƒÏ„Ï…Ï†Ï‡ÏˆÏ‰Ã€ÃÃ‚ÃƒÃ„Ã…Ã†Ã‡ÃˆÃ‰ÃŠÃ‹ÃŒÃÃÃÃÃ‘Ã’Ã“Ã”Ã•Ã–Ã˜Ã™ÃšÃ›ÃœÃÃÅ Å¸Å’Ã·É‘ÄÅ„Ç–Ç˜Ä“ÅÅ«Ä«É¡Ã Ã¡Ã¢Ã£Ã¤Ã¥Ã¦Ã§Ã¨Ã©ÃªÃ«Ã¬Ã­Ã®Ã¯Ã°Ã±Ã²Ã³ÃµÃ´Ã¶Ã¸Ã¹ÃºÃ»Ã¼Ã½Ã¾Å¡Ã¿Å“ÃŸÇÇ¹ÅˆÇšÇœÄ›Ç’Ç”ÇÆ’ĞĞ‘Ğ’Ğ“Ğ”Ğ•ĞĞ–Ğ—Ğ˜Ğ™ĞšĞ›ĞœĞĞĞŸĞ Ğ¡Ğ¢Ğ£Ğ¤Ğ¥Ğ¦Ğ§Ğ¨Ğ©ĞªĞ«Ğ¬Ğ­Ğ®Ğ¯Î±Ğ±Ğ²Ğ³Ğ´ĞµÑ‘Ğ¶Ğ·Ğ¸Ğ¹ĞºĞ»Ğ¼Ğ½Ğ¾Ğ¿Ñ€ÑÑ‚ÑƒÑ„Ñ…Ñ†Ñ‡ÑˆÑ‰ÑŠÑ‹ÑŒÑÑÑ]]},
    --{"ç¬¦å·",{"ï¼Œ","ã€‚","ï¼Ÿ","ï¼","ï¼š","ã€","()"}},
    }
  },
  {"Emoji",
     { --å­˜æ”¾è¡¨æƒ…çš„table
     --{æŒ‰é”®å,ç¬¦å·table æˆ– æ–‡æœ¬}
     {"ç¬‘è„¸",[[ğŸ¥¶ğŸ¤¬ğŸ¤¢ğŸ¥µğŸ˜‹ğŸ¤ğŸ¤®ğŸ˜ğŸ¤—ğŸ˜¶ğŸ˜ğŸ¤”ğŸ˜´ğŸ¤“ğŸ˜â˜ºğŸ˜ªğŸ˜¨ğŸ˜³ğŸ˜€ğŸ˜ğŸ˜‚ğŸ˜ƒğŸ˜„ğŸ˜…ğŸ˜†ğŸ˜‰ğŸ˜ŠğŸ˜‹ğŸ˜ğŸ˜ğŸ˜˜ğŸ˜—ğŸ˜™ğŸ˜šâ˜ºğŸ˜‡ğŸ˜ğŸ˜‘ğŸ˜¶ğŸ˜ğŸ˜£ğŸ˜¥ğŸ˜®ğŸ˜¯ğŸ˜ªğŸ˜«ğŸ˜´ğŸ˜ŒğŸ˜›ğŸ˜œğŸ˜ğŸ˜’ğŸ˜“ğŸ˜”ğŸ˜•ğŸ˜²ğŸ˜·ğŸ˜–ğŸ˜ğŸ˜ŸğŸ˜¤ğŸ˜¢ğŸ˜­ğŸ˜¦ğŸ˜§ğŸ˜¨ğŸ˜¬ğŸ˜°ğŸ˜±ğŸ˜³ğŸ˜µğŸ˜¡ğŸ˜ ğŸ‘¦ğŸ‘§ğŸ‘¨ğŸ‘©ğŸ‘´ğŸ‘µğŸ‘¶ğŸ‘±ğŸ‘®ğŸ‘²ğŸ‘³ğŸ‘·ğŸ‘¸ğŸ’‚ğŸ…ğŸ‘°ğŸ‘¼ğŸ’†ğŸ’‡ğŸ™ğŸ™ğŸ™…ğŸ™†ğŸ’ğŸ™‹ğŸ™‡ğŸ™ŒğŸ™ğŸ‘¤ğŸ‘¥ğŸš¶ğŸƒğŸ‘¯ğŸ’ƒğŸ‘«ğŸ‘¬ğŸ‘­ğŸ’ğŸ’‘ğŸ‘ª]]}, --[[é•¿æ–‡æœ¬ï¼Œå¯æ¢è¡Œ]]
     {"æ—¥å¸¸",[[ğŸ’ªğŸ‘ˆğŸ‘‰â˜ğŸ‘†ğŸ‘‡âœŒâœ‹ğŸ‘ŒğŸ‘ğŸ‘âœŠğŸ‘ŠğŸ‘‹ğŸ‘ğŸ‘ğŸ–•ğŸ––ğŸ¤ŸğŸ¤ğŸ’©ğŸ‘»ğŸ‘¿ğŸ’‹ğŸŒ‚ğŸ‘ âœğŸ‘£ğŸ‘€ğŸ‘‚ğŸ‘ƒğŸ‘…ğŸ‘„ğŸ’‹ğŸ‘“ğŸ‘”ğŸ‘•ğŸ‘–ğŸ‘—ğŸ‘˜ğŸ‘™ğŸ‘šğŸ‘›ğŸ‘œğŸ‘ğŸ’ğŸ’¼ğŸ‘ğŸ‘ŸğŸ‘ ğŸ‘¡ğŸ‘¢ğŸ‘‘ğŸ‘’ğŸ©ğŸ“ğŸ’„ğŸ’…ğŸ’ğŸŒ‚ğŸ“±ğŸ“²ğŸ“¶ğŸ“³ğŸ“´â˜ğŸ“ğŸ“ŸğŸ“ â™»ğŸ§ğŸš®ğŸš°â™¿ğŸš¹ğŸšºğŸš»ğŸš¼ğŸš¾âš ğŸš¸â›”ğŸš«ğŸš³ğŸš­ğŸš¯ğŸš±ğŸš·ğŸ”ğŸ’ˆğŸ˜ˆğŸ‘¿ğŸ‘¹ğŸ‘ºğŸ’€â˜ ğŸ‘»ğŸ‘½ğŸ‘¾ğŸ’£]]},
     {"è‡ªç„¶",[[ğŸğŸ‚ğŸ…ğŸ‡ğŸ‰ğŸğŸğŸğŸ’ğŸ“ğŸ•ğŸ–ğŸ¦ ğŸ¦ŸğŸ¦…ğŸœğŸ•¸ğŸğŸ¦€ğŸ¶ğŸ¦ŠğŸ™ğŸ¦ğŸ¤ğŸ¦…ğŸğŸ›ğŸ¦–ğŸ¦ğŸ ğŸŸğŸ¦›ğŸ˜ğŸ¾ğŸ·ğŸ½ğŸ¸ğŸ¦‡ğŸ¦ğŸ™ˆğŸ™‰ğŸ™ŠğŸµğŸ’ğŸ¶ğŸ•ğŸ©ğŸºğŸ±ğŸ˜ºğŸ˜¸ğŸ˜¹ğŸ˜»ğŸ˜¼ğŸ˜½ğŸ™€ğŸ˜¿ğŸ˜¾ğŸˆğŸ¯ğŸ…ğŸ†ğŸ´ğŸğŸ®ğŸ‚ğŸƒğŸ„ğŸ·ğŸ–ğŸ—ğŸ½ğŸğŸ‘ğŸğŸªğŸ«ğŸ˜ğŸ­ğŸğŸ€ğŸ¹ğŸ°ğŸ‡ğŸ»ğŸ¨ğŸ¼ğŸ¾ğŸ”ğŸ“ğŸ¦†ğŸ¦¢ğŸ•ŠğŸ¦œğŸ¦‰ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ§ğŸ¸ğŸŠğŸ¢ğŸğŸ²ğŸ‰ğŸ³ğŸ‹ğŸ¬ğŸŸğŸ ğŸ¡ğŸ™ğŸšğŸŒğŸ›ğŸœğŸğŸğŸ¦‹ğŸ’ğŸŒ¸ğŸ’®ğŸŒ¹ğŸŒºğŸŒ»ğŸŒ¼ğŸŒ·ğŸŒ±ğŸŒ²ğŸŒ³ğŸŒ´ğŸŒµğŸŒ¾ğŸŒ¿ğŸ€ğŸğŸ‚ğŸƒğŸŒğŸŒğŸŒğŸŒğŸŒ‘ğŸŒ’ğŸŒ“ğŸŒ”ğŸŒ•ğŸŒ–ğŸŒ—ğŸŒ˜ğŸŒ™ğŸŒšğŸŒ›ğŸŒœâ˜€ğŸŒğŸŒâ­ğŸŒŸğŸŒ â˜â›…â˜”âš¡â„ğŸ”¥ğŸ’§ğŸŒŠ]]},
     {"é£Ÿç‰©",[[ğŸ‡ğŸˆğŸ‰ğŸŠğŸ‹ğŸŒğŸğŸğŸğŸğŸ‘ğŸ’ğŸ“ğŸ…ğŸ†ğŸŒ½ğŸ„ğŸŒ°ğŸğŸ–ğŸ—ğŸ”ğŸŸğŸ•ğŸ³ğŸ²ğŸ±ğŸ˜ğŸ™ğŸšğŸ›ğŸœğŸğŸ ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¡ğŸ¦ğŸ§ğŸ¨ğŸ©ğŸªğŸ‚ğŸ°ğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸ¼â˜•ğŸµğŸ¶ğŸ·ğŸ¸ğŸ¹ğŸºğŸ»ğŸ´ğŸ ğŸ¡ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ¨ğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ¯ğŸ°ğŸ’’ğŸ—¼ğŸ—½â›ªğŸŒ†ğŸŒ‡ğŸŒ‰]]},
   {"äº¤é€š",[[ğŸš‚ğŸšƒğŸš„ğŸš…ğŸš†ğŸš‡ğŸšˆğŸš‰ğŸšŠğŸšğŸšğŸš‹ğŸšŒğŸšğŸšğŸšğŸšğŸš‘ğŸš’ğŸš“ğŸš”ğŸš•ğŸš–ğŸš—ğŸš˜ğŸššğŸš›ğŸšœğŸš²â›½ğŸš¨ğŸš¥ğŸš¦ğŸš§âš“â›µğŸš£ğŸš¤ğŸš¢âœˆğŸ’ºğŸšğŸšŸğŸš ğŸš¡ğŸš€ğŸŒ‹ğŸ—»ğŸ ğŸ¡ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ¨ğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ¯ğŸ°ğŸ’’ğŸ—¼ğŸ—½â›ªâ›²ğŸŒğŸŒƒğŸŒ†ğŸŒ‡ğŸŒ‰ğŸŒŒğŸ ğŸ¡ğŸ¢ğŸš‚ğŸšƒğŸš„ğŸš…ğŸš†ğŸš‡ğŸšˆğŸš‰ğŸšŠğŸšğŸšğŸš‹ğŸšŒğŸšğŸšğŸšğŸšğŸš‘ğŸš’ğŸš“ğŸš”ğŸš•ğŸš–ğŸš—ğŸš˜ğŸššğŸš›ğŸšœğŸš²â›½ğŸš¨ğŸš¥ğŸš¦ğŸš§âš“â›µğŸš¤ğŸš¢âœˆğŸ’ºğŸšğŸšŸğŸš ğŸš¡ğŸš€ğŸ‘ğŸ—¿ğŸ›‚ğŸ›ƒğŸ›„ğŸ›…]]},
     {"ç‰©å“",[[ğŸ’ŒğŸ’ğŸ”ªğŸ’ˆğŸšªğŸš½ğŸš¿ğŸ›âŒ›â³âŒšâ°ğŸˆğŸ‰ğŸŠğŸğŸğŸğŸ€ğŸğŸ“¯ğŸ“»ğŸ“±ğŸ“²â˜ğŸ“ğŸ“ŸğŸ“ ğŸ”‹ğŸ”ŒğŸ’»ğŸ’½ğŸ’¾ğŸ’¿ğŸ“€ğŸ¥ğŸ“ºğŸ“·ğŸ“¹ğŸ“¼ğŸ”ğŸ”ğŸ”¬ğŸ”­ğŸ“¡ğŸ’¡ğŸ”¦ğŸ®ğŸ“”ğŸ“•ğŸ“–ğŸ“—ğŸ“˜ğŸ“™ğŸ“šğŸ““ğŸ“ƒğŸ“œğŸ“„ğŸ“°ğŸ“‘ğŸ”–ğŸ’°ğŸ’´ğŸ’µğŸ’¶ğŸ’·ğŸ’¸ğŸ’³âœ‰ğŸ“§ğŸ“¨ğŸ“©ğŸ“¤ğŸ“¥ğŸ“¦ğŸ“«ğŸ“ªğŸ“¬ğŸ“­ğŸ“®âœâœ’ğŸ“ğŸ“ğŸ“‚ğŸ“…ğŸ“†ğŸ“‡ğŸ“ˆğŸ“‰ğŸ“ŠğŸ“‹ğŸ“ŒğŸ“ğŸ“ğŸ“ğŸ“âœ‚ğŸ”’ğŸ”“ğŸ”ğŸ”ğŸ”‘ğŸ”¨ğŸ”«ğŸ”§ğŸ”©ğŸ”—ğŸ’‰ğŸ’ŠğŸš¬ğŸ”®ğŸš©ğŸŒğŸ’¦ğŸ’¨ğŸ“±ğŸ“²â˜ğŸ“ğŸ“ŸğŸ“ ğŸ”‹ğŸ”ŒğŸ’»ğŸ’½ğŸ’¾ğŸ’¿ğŸ“€ğŸ¥ğŸ“ºğŸ“·ğŸ“¹ğŸ“¼ğŸ”ğŸ”ğŸ”¬ğŸ”­ğŸ“¡ğŸ“”ğŸ“•ğŸ“–ğŸ“—ğŸ“˜ğŸ“™ğŸ“šğŸ““ğŸ“ƒğŸ“œğŸ“„ğŸ“°ğŸ“‘ğŸ”–ğŸ’³âœ‰ğŸ“§ğŸ“¨ğŸ“©ğŸ“¤ğŸ“¥ğŸ“¦ğŸ“«ğŸ“ªğŸ“¬ğŸ“­ğŸ“®âœâœ’ğŸ“ğŸ“ğŸ“‚ğŸ“…ğŸ“†ğŸ“‡ğŸ“ˆğŸ“‰ğŸ“ŠğŸ“‹ğŸ“ŒğŸ“ğŸ“ğŸ“ğŸ“âœ‚ğŸ”’ğŸ”“ğŸ”ğŸ”ğŸ”‘]]},
     --{"æ—¥å¸¸","ğŸ’ªğŸ‘ˆğŸ‘‰â˜ğŸ‘†ğŸ‘‡âœŒâœ‹ğŸ‘ŒğŸ‘ğŸ‘âœŠğŸ‘ŠğŸ‘‹ğŸ‘ğŸ‘âœğŸ‘£ğŸ‘€ğŸ‘‚ğŸ‘ƒğŸ‘…ğŸ‘„ğŸ’‹ğŸ‘“ğŸ‘”ğŸ‘•ğŸ‘–ğŸ‘—ğŸ‘˜ğŸ‘™ğŸ‘šğŸ‘›ğŸ‘œğŸ‘ğŸ’ğŸ’¼ğŸ‘ğŸ‘ŸğŸ‘ ğŸ‘¡ğŸ‘¢ğŸ‘‘ğŸ‘’ğŸ©ğŸ“ğŸ’„ğŸ’…ğŸ’ğŸŒ‚ğŸ“±ğŸ“²ğŸ“¶ğŸ“³ğŸ“´â˜ğŸ“ğŸ“ŸğŸ“ ğŸªğŸ­ğŸ¨ğŸ°ğŸš£ğŸ›€ğŸ«ğŸ†âš½âš¾ğŸ€ğŸˆğŸ‰ğŸ¾ğŸ±ğŸ³â›³ğŸ£ğŸ½ğŸ¿ğŸ‚ğŸ„ğŸ‡ğŸŠğŸš´ğŸšµğŸ¯ğŸ®ğŸ²ğŸ·ğŸ¸ğŸºğŸ»ğŸ¬"}, --"çŸ­æ–‡æœ¬ï¼Œä¸èƒ½æ¢è¡Œ"
     --{"ç¬¦å·",{"ï¼Œ","ã€‚","ï¼Ÿ","ï¼","ï¼š","ã€","()"}},
     --{"é»„è„¸",[[ğŸ˜„ğŸ˜ƒğŸ˜€ğŸ˜Šâ˜ºğŸ˜‰ğŸ˜ğŸ˜˜ğŸ˜šğŸ˜—ğŸ˜œğŸ˜]]}, --[[é•¿æ–‡æœ¬ï¼Œå¯æ¢è¡Œ]]
     {"æ‰‹åŠ¿","ğŸ‘ğŸ‘ğŸ‘†ğŸ‘‡ğŸ‘‰ğŸ‘ˆğŸ‘ğŸ’ª"}, --"çŸ­æ–‡æœ¬ï¼Œä¸èƒ½æ¢è¡Œ"
     --{"ç¬¦å·",{"ï¼Œ","ã€‚","ï¼Ÿ","ï¼","ï¼š","ã€","()"}},
   }
  },
  {"é¢œè‰²è¡¨",
   { --å­˜æ”¾è¡¨æƒ…çš„table
    --{æŒ‰é”®å,ç¬¦å·table æˆ– æ–‡æœ¬}
    {"è¡¨1",{"#FFFFFF","#DDDDDD","#AAAAAA","#888888","#666666","#444444","#000000","#FFB7DD","#FF88C2","#FF44AA","#FF0088","#C10066","#A20055","#8C0044","#FFCCCC","#FF8888","#FF3333","#FF0000","#CC0000","#AA0000","#880000","#FFC8B4","#FFA488","#FF7744","#FF5511","#E63F00","#C63300","#A42D00","#FFDDAA","#FFBB66","#FFAA33","#FF8800","#EE7700","#CC6600","#BB5500","#FFEE99","#FFDD55","#FFCC22","#FFBB00","#DDAA00","#AA7700","#886600","#FFFFBB","#FFFF77","#FFFF33","#FFFF00","#EEEE00","#BBBB00","#888800","#EEFFBB","#DDFF77","#CCFF33","#BBFF00","#99DD00","#88AA00","#668800","#CCFF99","#BBFF66","#99FF33","#77FF00","#66DD00","#55AA00","#227700","#99FF99","#66FF66","#33FF33","#00FF00","#00DD00","#00AA00","#008800","#BBFFEE","#77FFCC","#33FFAA","#00FF99","#00DD77","#00AA55","#008844","#AAFFEE","#77FFEE","#33FFDD","#00FFCC","#00DDAA","#00AA88","#008866","#99FFFF","#66FFFF","#33FFFF","#00FFFF","#00DDDD","#00AAAA","#008888","#CCEEFF","#77DDFF","#33CCFF","#00BBFF","#009FCC","#0088A8","#007799","#CCDDFF","#99BBFF","#5599FF","#0066FF","#0044BB","#003C9D","#003377","#CCCCFF","#9999FF","#5555FF","#0000FF","#0000CC","#0000AA","#000088","#CCBBFF","#9F88FF","#7744FF","#5500FF","#4400CC","#2200AA","#220088","#D1BBFF","#B088FF","#9955FF","#7700FF","#5500DD","#4400B3","#3A0088","#E8CCFF","#D28EFF","#B94FFF","#9900FF","#7700BB","#66009D","#550088","#F0BBFF","#E38EFF","#E93EFF","#CC00FF","#A500CC","#7A0099","#660077","#FFB3FF","#FF77FF","#FF3EFF","#FF00FF","#CC00CC","#990099","#770077"}},
    {"è¡¨2",{"#f7acbc","#deab8a","#817936","#444693","#ef5b9c","#fedcbd","#7f7522","#2b4490","#feeeed","#f47920","#80752c","#2a5caa","#f05b72","#905a3d","#87843b","#224b8f","#f15b6c","#8f4b2e","#726930","#003a6c","#f8aba6","#87481f","#454926","#102b6a","#f69c9f","#5f3c23","#2e3a1f","#426ab3","#f58f98","#6b473c","#4d4f36","#46485f","#ca8687","#faa755","#b7ba6b","#4e72b8","#f391a9","#fab27b","#b2d235","#181d4b","#bd6758","#f58220","#5c7a29","#1a2933","#d71345","#843900","#bed742","#121a2a","#d64f44","#905d1d","#7fb80e","#0c212b","#d93a49","#8a5d19","#a3cf62","#6a6da9","#b3424a","#8c531b","#769149","#585eaa","#c76968","#826858","#6d8346","#494e8f","#bb505d","#64492b","#78a355","#afb4db","#987165","#ae6642","#abc88b","#9b95c9","#ac6767","#56452d","#74905d","#6950a1","#973c3f","#96582a","#cde6c7","#6f60aa","#b22c46","#705628","#1d953f","#867892","#a7324a","#4a3113","#77ac98","#918597","#aa363d","#412f1f","#007d65","#6f6d85","#ed1941","#845538","#84bf96","#594c6d","#f26522","#8e7437","#45b97c","#694d9f","#d2553d","#69541b","#225a1f","#6f599c","#b4534b","#d5c59f","#367459","#8552a1","#ef4136","#cd9a5b","#007947","#543044","#c63c26","#cd9a5b","#40835e","#63434f","#f3715c","#b36d41","#2b6447","#7d5886","#a7573b","#df9464","#005831","#401c44","#aa2116","#b76f40","#006c54","#472d56","#b64533","#ad8b3d","#375830","#45224a","#b54334","#dea32c","#274d3d","#411445","#853f04","#d1923f","#375830","#4b2f3d","#840228","#c88400","#27342b","#402e4c","#7a1723","#c37e00","#65c294","#c77eb5","#a03939","#c37e00","#73b9a2","#ea66a6","#8a2e3b","#e0861a","#72baa7","#f173ac","#8e453f","#ffce7b","#005344","#fffffb","#8f4b4a","#fcaf17","#122e29","#fffef9","#892f1b","#ba8448","#293047","#f6f5ec","#6b2c25","#896a45","#00ae9d","#d9d6c3","#733a31","#76624c","#508a88","#d1c7b7","#54211d","#6d5826","#70a19f","#f2eada","#78331e","#ffc20e","#50b7c1","#d3d7d4","#53261f","#fdb933","#00a6ac","#999d9c","#f15a22","#d3c6a6","#78cdd1","#a1a3a6","#b4533c","#c7a252","#008792","#9d9087","#84331f","#dec674","#94d6da","#8a8c8e","#f47a55","#b69968","#afdfe4","#74787c","#f15a22","#c1a173","#5e7c85","#7c8577","#f3704b","#dbce8f","#76becc","#72777b","#da765b","#ffd400","#90d7ec","#77787b","#c85d44","#ffd400","#009ad6","#4f5555","#ae5039","#ffe600","#145b7d","#6c4c49","#6a3427","#f0dc70","#11264f","#563624","#8f4b38","#fcf16e","#7bbfea","#3e4145","#8e3e1f","#decb00","#33a3dc","#3c3645","#f36c21","#cbc547","#228fbd","#464547","#b4532a","#6e6b41","#2468a2","#130c0e","#b7704f","#596032","#2570a1","#281f1d","#de773f","#525f42","#2585a6","#2f271d","#c99979","#5f5d46","#1b315e"}}
   }
  }
}

local å‚æ•°=(...)
local è„šæœ¬ç›®å½•=tostring(service.getLuaExtDir("script"))
local è„šæœ¬è·¯å¾„=debug.getinfo(1,"S").source:sub(2)--è·å–Luaè„šæœ¬çš„å®Œæ•´è·¯å¾„
local çº¯è„šæœ¬å=File(è„šæœ¬è·¯å¾„).getName()
local ç›®å½•=string.sub(è„šæœ¬è·¯å¾„,1,#è„šæœ¬è·¯å¾„-#çº¯è„šæœ¬å)
local è„šæœ¬ç›¸å¯¹è·¯å¾„=string.sub(è„šæœ¬è·¯å¾„,#è„šæœ¬ç›®å½•+1)

local ç¼–å·=1
if å‚æ•°!=nil && string.find(å‚æ•°,"ã€Šã€Š")!=nil && string.find(å‚æ•°,"ã€‹ã€‹")!=nil then
 ç¼–å·=tonumber(string.sub(å‚æ•°,string.find(å‚æ•°,"ã€Šã€Š")+6,string.find(å‚æ•°,"ã€‹ã€‹")-1))
end



local ids,data={},{}
local item={LinearLayout,
  layout_width=-1,
  padding="2dp",
  gravity=17,
  {CardView,
    radius="10dp",
    CardElevation=0,
    layout_width=-1,
    {TextView,
      id="a",
      padding="8dp",
      gravity=17,
      layout_width=-1,
      textColor=0xff232323,
      textSize="18dp"}
      }
    }
      
      
local adp=LuaAdapter(service,data,item)

local function Back() --ç”ŸæˆåŠŸèƒ½é”®èƒŒæ™¯
  local bka=LuaDrawable(function(c,p,d)
    local b=d.bounds
    b=RectF(b.left,b.top,b.right,b.bottom)
    p.setColor(0xffffffff)
    c.drawRoundRect(b,20,20,p) --åœ†è§’20
  end)
  local bkb=LuaDrawable(function(c,p,d)
    local b=d.bounds
    b=RectF(b.left,b.top,b.right,b.bottom)
    p.setColor(0xffc4c9ca)
    c.drawRoundRect(b,20,20,p)
  end)

  local stb=StateListDrawable()
  stb.addState({-android.R.attr.state_pressed},bkb)
  stb.addState({android.R.attr.state_pressed},bka)
  return stb
end



--åˆ·æ–°åˆ—è¡¨
local function fresh(t)
  table.clear(data)
  if type(t)~="table" then
    local ts={}
    for a in utf8.gmatch(tostring(t),"%S")
      table.insert(ts,a)
    end
    t=ts
  end
  for _,v in ipairs(t) do
    if string.find(v,"#[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]")==nil then
      --print(v.." éé¢œè‰²ä»£ç ")
      table.insert(data,{
    a={
      Text=v, 
     BackgroundColor=Color.parseColor("#7fb80e"),
    }, 
  })
    else
      table.insert(data,{
    a={
      Text=v, 
      BackgroundColor=Color.parseColor(v),
    }, 
  })
   end
    
  end
  adp.notifyDataSetChanged()
  
end

local function bus(t,id)
  local Bus={LinearLayout,
    paddingLeft="2dp",
    layout_width=-1}

  for _,v in ipairs(t) do
    table.insert(Bus,{TextView,
      text=tostring(v[1]),
      layout_margin="2dp",
      layout_marginLeft="1dp",
      layout_marginRight="1dp",
      paddingTop="9dp",
      paddingBottom="9dp",
      gravity=17,
      layout_width=-1,
      layout_height=-1,
      layout_weight=1,
      onClick=function()
        fresh(v[2])
      end,
      OnLongClickListener={onLongClick=function() return true end},
      Background=Back(),
      textColor=0xff232323,
      textSize="18dp"})
  end
  if ids.main.getChildAt(1)
    ids.main.removeViewAt(1)
  end
  ids.main.addView(loadlayout(Bus))
end

local function Icon(k,s) --è·å–kåŠŸèƒ½å›¾æ ‡ï¼Œæ²¡æœ‰è¿”å›s
  k=Key.presetKeys[k]
  return k and k.label or s
end

local function Bu_R(id) --ç”ŸæˆåŠŸèƒ½é”®
  local Bu={LinearLayout,
    layout_height=-1,
    layout_width=-1,
    layout_weight=1,
    padding="2dp",
    {FrameLayout,
      layout_height=-1,
      layout_width=-1,
      Background=Back(),
      {TextView,
        gravity=17|48,
        layout_height=-1,
        layout_width=-1,
        layout_marginTop="2dp",
        textColor=0xff232323,
        textSize="10dp"},
      {TextView,
        gravity=17,
        layout_height=-1,
        layout_width=-1,
        textColor=0xff232323,--æ ‡ç­¾é¢œè‰²
        textSize="18dp"}}}
  local msg=Bu[2][2] --ä¸Šæ ‡ç­¾
  local label=Bu[2][3] --ä¸»æ ‡ç­¾
  
  
  if id<=#arr then
    label.text=Icon(arr[id][1],arr[id][1])
    label.textSize="18dp" --é»˜è®¤ç¬¦å·âŒ«å¤ªå°ï¼Œå­—ä½“å¤§å°æ”¹ä¸º22dpï¼Œåé¢åŒç†
    Bu.onClick=function()
      fresh(arr[id][2][1][2])
      bus(arr[id][2])
    end
    Bu.OnLongClickListener={onLongClick=function() return true end}
   elseif id==(#arr+3) then
    label.text=Icon("Keyboard_default","è¿”å›")
    Bu.onClick=function()
      service.sendEvent("Keyboard_default")
    end
   elseif id==(#arr+1) then
    label.text=Icon("ç¼–è¾‘","ç¼–è¾‘")
    Bu.onClick=function()
      service.editFile(è„šæœ¬è·¯å¾„)--ç”¨å†…ç½®ç¼–è¾‘å™¨æ‰“å¼€æ–‡ä»¶
    end
    elseif id==(#arr+2) then
    label.text=Icon("BackSpace","âŒ«")
    Bu.onClick=function()
      service.sendEvent("BackSpace")
    end
    Bu.OnLongClickListener={onLongClick=function() return true end}
  end
  return Bu
end

local height="240dp" --é”®ç›˜é«˜åº¦
pcall(function()
  --é”®ç›˜è‡ªé€‚åº”é«˜åº¦ï¼Œæ—§ç‰ˆä¸­æ–‡ä¸æ”¯æŒï¼Œæ”¾pcallé‡Œé˜²æŠ¥é”™
  height=service.getLastKeyboardHeight()
end)

local layout={LinearLayout,
  orientation=1,
  --é”®ç›˜é«˜åº¦
  layout_height=height,
  layout_width=-1,
  --èƒŒæ™¯é¢œè‰²
  BackgroundColor=0xffd7dddd,
  {TextView,
    layout_height="1dp",
    layout_width=-1,
    BackgroundColor=0xffdfdfdf},
  {LinearLayout,
    layout_height=-1,
    layout_width=-1,
    {LinearLayout,
      orientation=1,
      layout_width="60dp",
      layout_height=-1,
      layout_gravity=5|84,

      --Bu_R(1),

      },

    {LinearLayout,
      id="main",
      orientation=1,
      --å³ä¾§åŠŸèƒ½é”®å®½åº¦
      layout_width=-1,
      layout_height=-1,
      --layout_gravity=5|84,
      {GridView, --åˆ—è¡¨æ§ä»¶
        id="list",
        numColumns=3, --6åˆ—
        paddingLeft="2dp",
        paddingRight="2dp",
        layout_width=-1,
        layout_weight=1}},
}}

for i=1,#arr+3 do
  table.insert(layout[3][2],Bu_R(i))
end

layout=loadlayout(layout,ids)

ids.list.Adapter=adp

ids.list.onItemClick=function(l,v,p)
  local s=data[p+1].a.Text
  --dofile(tostring(service.getLuaExtDir("script")).."/åŒ…/å­—ç¬¦ä¸²/å­—ç¬¦ä¸²æ•°ç»„äº’è½¬.lua")
  --print(æ•°ç»„è½¬å­—ç¬¦ä¸²(s))
  service.commitText(s)
end

ids.list.onItemLongClick=function(l,v,p)
  --è¿”å›ï¼ˆçœŸï¼‰ï¼Œå¦åˆ™é•¿æŒ‰ä¹Ÿä¼šè§¦å‘ç‚¹å‡»äº‹ä»¶
  return true
end




--åˆå§‹æ˜¾ç¤ºEmojiç¬¬ä¸€é¡¹å†…å®¹
fresh(arr[1][2][1][2])
bus(arr[1][2],1)



service.setKeyboard(layout)